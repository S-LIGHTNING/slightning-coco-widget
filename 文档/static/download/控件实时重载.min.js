// ==CoCoWidget==
// @name 控件实时重载
// @author SLIGHTNING
// @version 0.0.1
// @license Apache-2.0
// ==/CoCoWidget==
new Function("require","exports","__slightning_coco_widget_require__","__slightning_coco_widget_exports__","InvisibleWidget","VisibleWidget","widgetClass","React","("+function(){try{var e={247:(e,t)=>{function r(){if(null==window.__slightning_coco_widget_iframe_window__){var e=document.createElement("iframe");e.sandbox.add("allow-same-origin"),e.src=location.href,e.style.display="none",document.body.appendChild(e),Object.defineProperty(window,"__slightning_coco_widget_iframe_window__",{value:e.contentWindow,enumerable:!1,configurable:!1})}return window.__slightning_coco_widget_iframe_window__}Object.defineProperty(t,"__esModule",{value:!0}),t.getIFrameWindow=r,t.getIFrameWindowVar=function(e){return r()[e.replace(/_/g,"")]}},344:(e,t,r)=>{const o=r(878);e.exports=(0,o.getGlobalVar)("fetch")},526:(e,t,r)=>{const o=r(247);e.exports=(0,o.getIFrameWindowVar)("Web_Socket")},878:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getGlobalVar=function(e){return new Function("return window."+e.replace(/_/g,""))()}}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var o=r(344),n=r.n(o),i=r(526),l=r.n(i);const pe=React;var a=r.n(pe);let de=null;function s(){if(null==de)throw new Error("未设置默认适配器");return de}function u(e){de=e}const fe=__slightning_coco_widget_require__,ye=InvisibleWidget,ge=VisibleWidget,he=__slightning_coco_widget_exports__;class ve{test(e){return null===e}toString(e,t,r){return"null"}}class we{test(e){return void 0===e}toString(e,t,r){return"undefined"}}function c(e){const{indent:t}=e;return"number"==typeof t?" ".repeat(t):t}class be{test(e){return!0}prepare(e,t,r){var o;if(null==r.prepareData.refMap.get(e))if(r.accessedSet.has(e)&&null!=e&&"object"==typeof e&&(t.ref||r.pathArray.includes(e)))r.prepareData.refMap.set(e,r.prepareData.refMap.size+1);else{if(r.accessedSet.add(e),r.pathArray.push(e),t.depth<=0||r.pathArray.length<=t.depth){let n;n="function"==typeof t.rules?t.rules(e,t,r):t.rules;for(const i of n)if(i.test(e)){null===(o=i.prepare)||void 0===o||o.call(i,e,t,r);break}}r.pathArray.pop()}}toString(e,t,r){let o="";const n=r.prepareData.refMap.get(e);if(null!=n){if(r.accessedRefSet.has(e))return`[Circular *${n}]`;r.accessedRefSet.add(e),o+=`<ref *${n}> `}let i;r.depth++,i=t.depth<=0||r.depth<=t.depth?"function"==typeof t.rules?t.rules(e,t,r):t.rules:Nt;const l=i.find((t=>t.test(e)));return o+=null==l?`[unknown type: ${typeof e} ${Object.prototype.toString.call(e)}]`:l.toString(e,t,r),r.depth--,o}}function p(e,t){return Array.isArray(e)?e.includes(t):null!=typeof Set&&e instanceof Set?e.has(t):"function"==typeof e&&e(t)}class me{constructor({defaultConfig:e,specialValue:t={}}){this.defaultConfig=e,this.specialValue=t}test(e){return"object"==typeof e}prepare(e,t,r){const o=Object.assign({},this.defaultConfig,t.object);let n=[];n.push(...Object.getOwnPropertyNames(e)),o.symbol&&n.push(...Object.getOwnPropertySymbols(e)),o.unenumerable||(n=n.filter((t=>{var r,o;return null!==(o=null===(r=Object.getOwnPropertyDescriptor(e,t))||void 0===r?void 0:r.enumerable)&&void 0!==o&&o}))),n=n.filter((e=>!p(o.exclude,e)));for(const i of n){const n=Object.getOwnPropertyDescriptor(e,i);if(o.get||null!=n&&"value"in n){let o;try{o=e[i]}catch(e){o=e}(new be).prepare(o,t,r)}}for(const i of n){const n=Object.getOwnPropertyDescriptor(e,i);o.getter&&null!=(null==n?void 0:n.get)&&(new be).prepare(n.get,t,r),o.setter&&null!=(null==n?void 0:n.set)&&(new be).prepare(n.set,t,r)}o.prototype&&(new be).prepare(Object.getPrototypeOf(e),t,r)}toString(e,t,r){var o,n,i;const l=Object.assign({},this.defaultConfig,t.object);let a=null!==(i=null===(n=null===(o=Object.getPrototypeOf(e))||void 0===o?void 0:o.constructor)||void 0===n?void 0:n.name)&&void 0!==i?i:"Object";a+=" {\n";let s=[];s.push(...Object.getOwnPropertyNames(e)),l.symbol&&s.push(...Object.getOwnPropertySymbols(e)),l.unenumerable||(s=s.filter((t=>{var r,o;return null!==(o=null===(r=Object.getOwnPropertyDescriptor(e,t))||void 0===r?void 0:r.enumerable)&&void 0!==o&&o}))),s=s.filter((e=>!p(l.exclude,e)));for(const o of s){const n="string"==typeof o?o:`[${String(o)}]`,i=Object.getOwnPropertyDescriptor(e,o);(l.get||null!=i&&"value"in i)&&(a+=`${n}: ${this.propertyToString(e,o,t,r)}`.split("\n").map((e=>`${c(t)}${e}`)).join("\n")+"\n")}for(const o of s){const n="string"==typeof o?o:`[${String(o)}]`,i=Object.getOwnPropertyDescriptor(e,o);l.getter&&null!=(null==i?void 0:i.get)&&(a+=`get ${n}: ${(new be).toString(i.get,t,r)}`.split("\n").map((e=>`${c(t)}${e}`)).join("\n")+"\n"),l.setter&&null!=(null==i?void 0:i.set)&&(a+=`set ${n}: ${(new be).toString(i.set,t,r)}`.split("\n").map((e=>`${c(t)}${e}`)).join("\n")+"\n")}l.prototype&&(this.specialValue["[[Prototype]]"]=(new be).toString(Object.getPrototypeOf(e),t,r));for(const[e,r]of Object.entries(this.specialValue))a+=`${e}: ${r}`.split("\n").map((e=>`${c(t)}${e}`)).join("\n")+"\n";return a+="}",0==s.length&&0==Object.keys(this.specialValue).length?"{}":a}propertyToString(e,t,r,o){let n,i=!1;try{n=e[t]}catch(e){i=!0,n=e}const l=(new be).toString(n,r,o);return i?`[Exception: ${l}]`:l}}class Te{constructor(){this.test=me.prototype.test}toString(e,t,r){return Object.prototype.toString.call(e)}}class Ve extends me{constructor({defaultConfig:e={},specialValue:t={}}={}){super({defaultConfig:Object.assign({unenumerable:!1,symbol:!1,get:!1,getter:!1,setter:!1,prototype:!1,exclude:[]},e),specialValue:t})}}class Ce extends me{constructor({defaultConfig:e={},specialValue:t={}}={}){super({defaultConfig:Object.assign({unenumerable:!0,symbol:!0,get:!0,getter:!1,setter:!1,prototype:!1,exclude:[]},e),specialValue:t})}}class Se extends me{constructor({defaultConfig:e={},specialValue:t={}}={}){super({defaultConfig:Object.assign({unenumerable:!0,symbol:!0,get:!0,getter:!0,setter:!0,prototype:!0,exclude:[]},e),specialValue:t})}}function d(e){return"string"==typeof e}function f(e,t){return"string"==typeof t&&(t=parseInt(t)),!!Number.isInteger(t)&&("number"==typeof t&&0<=t&&t<e.length)}class _e{constructor(){this.test=d}toString(e,t,r){return JSON.stringify(e)}}class Ee{constructor(){this.test=d}toString(e,t,r){return JSON.stringify(e)}}class Pe{constructor(){this.test=d}toString(e,t,r){return`[string: ${JSON.stringify(e)}]`}}class $e{constructor(){this.test=d}prepare(e,t,r){new Se({defaultConfig:{exclude:t=>f(e,t)}}).prepare(e,t,r)}toString(e,t,r){return`[string: ${JSON.stringify(e)}] ${new Se({defaultConfig:{exclude:t=>f(e,t)}}).toString(e,t,r)}`}}function y(e){return"number"==typeof e}class je{constructor(){this.test=y}toString(e,t,r){return String(e)}}class ke{constructor(){this.test=y}toString(e,t,r){return String(e)}}class Oe{constructor(){this.test=y}toString(e,t,r){return`[number: ${String(e)}]`}}class Ie{constructor(){this.test=y}prepare(e,t,r){(new Se).prepare(e,t,r)}toString(e,t,r){return`[number: ${String(e)}] ${(new Se).toString(e,t,r)}`}}function g(e){return"boolean"==typeof e}class Me{constructor(){this.test=g}toString(e,t,r){return String(e)}}class Ae{constructor(){this.test=g}toString(e,t,r){return String(e)}}class Ne{constructor(){this.test=g}toString(e,t){return`[boolean: ${String(e)}]`}}class Le{constructor(){this.test=g}prepare(e,t,r){(new Se).prepare(e,t,r)}toString(e,t,r){return`[boolean: ${String(e)}] ${(new Se).toString(e,t,r)}`}}function h(e){return"object"==typeof e&&e instanceof String}function v(e,t){return"string"==typeof t&&(t=parseInt(t)),!!Number.isInteger(t)&&("number"==typeof t&&0<=t&&t<e.length)}class Re{constructor(){this.test=h}toString(e,t,r){return JSON.stringify(e)}}class We{constructor(){this.test=h}toString(e,t,r){return`String(${JSON.stringify(e)})`}}class De{constructor(){this.test=h}prepare(e,t,r){new Ce({defaultConfig:{exclude:t=>v(e,t)}}).prepare(e,t,r)}toString(e,t,r){return`String(${JSON.stringify(e)}) ${new Ce({defaultConfig:{exclude:t=>v(e,t)}}).toString(e,t,r)}`}}class Ge{constructor(){this.test=h}prepare(e,t,r){new Se({defaultConfig:{exclude:t=>v(e,t)}}).prepare(e,t,r)}toString(e,t,r){return`String(${JSON.stringify(e)}) ${new Se({defaultConfig:{exclude:t=>v(e,t)}}).toString(e,t,r)}`}}function w(e){return"object"==typeof e&&e instanceof Number}class xe{constructor(){this.test=w}toString(e,t,r){return String(e)}}class He{constructor(){this.test=w}toString(e,t,r){return`Number(${String(e)})`}}class Be{constructor(){this.test=w}prepare(e,t,r){(new Ce).prepare(e,t,r)}toString(e,t,r){return`Number(${String(e)}) ${(new Ce).toString(e,t,r)}`}}class Fe{constructor(){this.test=w}prepare(e,t,r){(new Se).prepare(e,t,r)}toString(e,t,r){return`Number(${String(e)}) ${(new Se).toString(e,t,r)}`}}function b(e){return"object"==typeof e&&e instanceof Boolean}class qe{constructor(){this.test=b}toString(e,t,r){return String(e)}}class Ue{constructor(){this.test=b}toString(e,t,r){return`Boolean(${String(e)})`}}class Je{constructor(){this.test=b}prepare(e,t,r){(new Ce).prepare(e,t,r)}toString(e,t,r){return`Boolean(${String(e)}) ${(new Ce).toString(e,t,r)}`}}class ze{constructor(){this.test=b}prepare(e,t,r){(new Se).prepare(e,t,r)}toString(e,t,r){return`Boolean(${String(e)}) ${(new Se).toString(e,t,r)}`}}function m(e){return"undefined"!=typeof RegExp&&e instanceof RegExp}class Ye{constructor(){this.test=m}toString(e,t,r){return String(e)}}class Xe{constructor(){this.test=m}toString(e,t,r){return`RegExp(${String(e)})`}}class Ke{constructor(){this.test=m}prepare(e,t,r){(new Ce).prepare(e,t,r)}toString(e,t,r){return`RegExp(${String(e)}) ${(new Ce).toString(e,t,r)}`}}class Qe{constructor(){this.test=m}prepare(e,t,r){(new Se).prepare(e,t,r)}toString(e,t,r){return`RegExp(${String(e)}) ${(new Se).toString(e,t,r)}`}}function T(e){return"symbol"==typeof e}class Ze{constructor(){this.test=T}toString(e,t,r){return String(e)}}class et{constructor(){this.test=T}toString(e,t,r){return String(e)}}class tt{constructor(){this.test=T}toString(e,t,r){return String(e)}}class rt{constructor(){this.test=T}prepare(e,t,r){(new Se).prepare(e,t,r)}toString(e,t,r){return`${String(e)} ${(new Se).toString(e,t,r)}`}}function V(e){return"bigint"==typeof e}class ot{constructor(){this.test=V}toString(e,t,r){return String(e)}}class nt{constructor(){this.test=V}toString(e,t,r){return String(e)}}class it{constructor(){this.test=V}toString(e,t,r){return`[bigint: ${String(e)}]`}}class lt{constructor(){this.test=V}prepare(e,t,r){(new Se).prepare(e,t,r)}toString(e,t,r){return`[bigint: ${String(e)}] ${(new Se).toString(e,t,r)}`}}function C(e){return"undefined"!=typeof Set&&e instanceof Set}class at{constructor(){this.test=C}toString(e,t,r){return`Set(${e.size})`}}class st{constructor(){this.test=C}prepare(e,t,r){(new Ve).prepare(e,t,r);for(const o of e.values())(new be).prepare(o,t,r)}toString(e,t,r){return new Ve({specialValue:{"[[Values]]":0==e.size?"None":Array.from(e).map((e=>`${(new be).toString(e,t,r)}`.split("\n").join(`\n${c(t)}`))).map(((e,r)=>`\n${c(t)}${r}: ${e}`)).join("")}}).toString(e,t,r)}}class ut{constructor(){this.test=C}prepare(e,t,r){(new Ce).prepare(e,t,r);for(const o of e.values())(new be).prepare(o,t,r)}toString(e,t,r){return new Ce({specialValue:{"[[Values]]":0==e.size?"None":Array.from(e).map((e=>`${(new be).toString(e,t,r)}`.split("\n").join(`\n${c(t)}`))).map(((e,r)=>`\n${c(t)}${r}: ${e}`)).join("")}}).toString(e,t,r)}}class ct{constructor(){this.test=C}prepare(e,t,r){(new Se).prepare(e,t,r);for(const o of e.values())(new be).prepare(o,t,r)}toString(e,t,r){return new Se({specialValue:{"[[Values]]":0==e.size?"None":Array.from(e).map((e=>`${(new be).toString(e,t,r)}`.split("\n").join(`\n${c(t)}`))).map(((e,r)=>`\n${c(t)}${r}: ${e}`)).join("")}}).toString(e,t,r)}}function S(e){return"undefined"!=typeof Map&&e instanceof Map}class pt{constructor(){this.test=S}toString(e,t,r){return`Map(${e.size})`}}class dt{constructor(){this.test=S}prepare(e,t,r){(new Ve).prepare(e,t,r);for(const o of e.keys())(new be).prepare(o,t,r);for(const o of e.values())(new be).prepare(o,t,r)}toString(e,t,r){return new Ve({specialValue:{"[[Entries]]":0==e.size?"None":Array.from(e.entries().map((([e,o])=>`${(new be).toString(e,t,r)}: ${(new be).toString(o,t,r)}`.split("\n").join(`\n${c(t)}`))).map((e=>`\n${c(t)}${e}`))).join("")}}).toString(e,t,r)}}class ft{constructor(){this.test=S}prepare(e,t,r){(new Ce).prepare(e,t,r);for(const o of e.keys())(new be).prepare(o,t,r);for(const o of e.values())(new be).prepare(o,t,r)}toString(e,t,r){return new Ce({specialValue:{"[[Entries]]":0==e.size?"None":Array.from(e.entries().map((([e,o])=>`\nkey: ${(new be).toString(e,t,r)}\nvalue: ${(new be).toString(o,t,r)}`.split("\n").join(`\n${c(t).repeat(2)}`))).map(((e,r)=>`\n${c(t)}${r}: ${e}`))).join("")}}).toString(e,t,r)}}class yt{constructor(){this.test=S}prepare(e,t,r){(new Se).prepare(e,t,r);for(const o of e.keys())(new be).prepare(o,t,r);for(const o of e.values())(new be).prepare(o,t,r)}toString(e,t,r){return new Se({specialValue:{"[[Entries]]":0==e.size?"None":Array.from(e.entries().map((([e,o])=>`\nkey: ${(new be).toString(e,t,r)}\nvalue: ${(new be).toString(o,t,r)}`.split("\n").join(`\n${c(t).repeat(2)}`))).map(((e,r)=>`\n${c(t)}${r}: ${e}`))).join("")}}).toString(e,t,r)}}function _(e){return"undefined"!=typeof WeakRef&&e instanceof WeakRef}class gt{constructor(){this.test=_}toString(e,t,r){return"[WeakRef]"}}class ht{constructor(){this.test=_}prepare(e,t,r){(new Ve).prepare(e,t,r);const o=e.deref();null!=o&&(new be).prepare(o,t,r)}toString(e,t,r){const o=e.deref();return new Ve({specialValue:{"[[WeakRefTarget]]":null==o?"None":`${(new be).toString(o,t,r)}`}}).toString(e,t,r)}}class vt{constructor(){this.test=_}prepare(e,t,r){(new Ce).prepare(e,t,r);const o=e.deref();null!=o&&(new be).prepare(o,t,r)}toString(e,t,r){const o=e.deref();return new Ce({specialValue:{"[[WeakRefTarget]]":null==o?"None":`${(new be).toString(o,t,r)}`}}).toString(e,t,r)}}class wt{constructor(){this.test=_}prepare(e,t,r){(new Se).prepare(e,t,r);const o=e.deref();null!=o&&(new be).prepare(o,t,r)}toString(e,t,r){const o=e.deref();return new Se({specialValue:{"[[WeakRefTarget]]":null==o?"None":`${(new be).toString(o,t,r)}`}}).toString(e,t,r)}}function E(e){return"undefined"!=typeof Error&&e instanceof Error}class bt{constructor(){this.test=E}toString(e,t,r){return`[${e.name}]`}}class mt{constructor(){this.test=E}toString(e,t,r){return Error.prototype.toString.call(e)}}class Tt{constructor(){this.test=E}toString(e,t,r){var o;return null!==(o=e.stack)&&void 0!==o?o:Error.prototype.toString.call(e)}}class Vt{constructor(){this.test=E}prepare(e,t,r){(new Se).prepare(e,t,r)}toString(e,t,r){var o;return`${null!==(o=e.stack)&&void 0!==o?o:Error.prototype.toString.call(e)}${(new Se).toString(e,t,r)}`}}function P(e){return"undefined"!=typeof HTMLElement&&e instanceof HTMLElement}class Ct{constructor(){this.test=P}toString(e,t,r){let o=e.tagName;""!=e.id&&(o+=`#${e.id}`);for(const t of Array.from(e.classList))o+=`.${t}`;return`[${Object.getPrototypeOf(e).constructor.name}: ${o}]`}}class St{constructor(){this.test=P}toString(e,t,r){if(""==e.innerHTML)return e.outerHTML;return e.cloneNode(!1).innerText="...",e.outerHTML}}class _t{constructor(){this.test=P}toString(e,t,r){return e.outerHTML}}class Et{constructor(){this.test=P}prepare(e,t,r){(new Se).prepare(e,t,r)}toString(e,t,r){return e.outerHTML+" "+(new Se).toString(e,t,r)}}class Pt{constructor(){this.test=Array.isArray}toString(e,t,r){return`Array(${e.length})`}}class $t{constructor(){this.test=Array.isArray}prepare(e,t,r){for(const o of e)null!=o&&(new be).prepare(o,t,r)}toString(e,t,r){if(0==e.length)return"Array []";let o="Array [\n";o+=(0 in e?(new be).toString(e[0],t,r):"None").split("\n").map((e=>`${c(t)}${e}`)).join("\n");for(let n=1;n<e.length;n++)o+=`,\n${(n in e?(new be).toString(e[n],t,r):"None").split("\n").map((e=>`${c(t)}${e}`)).join("\n")}`;return o+="\n]",o}}class jt{constructor(){this.test=Array.isArray}prepare(e,t,r){(new Ce).prepare(e,t,r)}toString(e,t,r){return(new Ce).toString(e,t,r)}}class kt{constructor(){this.test=Array.isArray}prepare(e,t,r){(new Se).prepare(e,t,r)}toString(e,t,r){return(new Ce).toString(e,t,r)}}function $(e){return"function"==typeof e}class Ot{constructor(){this.test=$}toString(e,t,r){return""==e.name?"[Function]":`[Function: ${e.name}]`}}class It{constructor(){this.test=$}toString(e,t){const r=Function.prototype.toString.call(e).replace(/[\s]+/g," ");if(r.length<=64)return r;const o=r.match(/^((function[\s]*[\S]+?[\s]*\([\s\S]*?\)|([\S]+?|\([\s\S]*?\))[\s]*=>|class[\s]*[\S]+?)[\s]*\{[\s]*)[\s\S]*?([\s]*\}[\s]*)$/);return null==o?r:`${o[1]}...${o[4]}`}}class Mt{constructor(){this.test=$}toString(e,t,r){return Function.prototype.toString.call(e)}}class At{constructor(){this.test=$}prepare(e,t,r){(new Se).prepare(e,t,r)}toString(e,t,r){return Function.prototype.toString.call(e)+" "+(new Se).toString(e,t,r)}}const Nt=[new ve,new we,new _e,new je,new Me,new Re,new xe,new qe,new Ye,new Ze,new ot,new at,new pt,new gt,new bt,new Ct,new Pt,new Te,new Ot],Lt=[new ve,new we,new Ee,new ke,new Ae,new We,new He,new Ue,new Xe,new et,new nt,new st,new dt,new ht,new mt,new St,new $t,new Ve,new It],Rt=[new ve,new we,new Pe,new Oe,new Ne,new De,new Be,new Je,new Ke,new tt,new it,new ut,new ft,new vt,new Tt,new _t,new jt,new Ce,new Mt],Wt=[new ve,new we,new $e,new Ie,new Le,new Ge,new Fe,new ze,new Qe,new rt,new lt,new ct,new yt,new wt,new Vt,new Et,new kt,new Se,new At];const Dt=function(e,t={}){const r=Object.assign({rules(e,t,r){switch("pathArray"in r?r.pathArray.length:r.depth){case 1:return Wt;case 2:return Rt;case 3:return Lt;default:return Nt}},indent:4,depth:4,ref:!1,object:{}},t),o={refMap:new Map};return(new be).prepare(e,r,{pathArray:[],accessedSet:new Set,prepareData:o}),(new be).toString(e,r,{depth:0,accessedRefSet:new Set,prepareData:o})};function j(e,...t){for(const r of t)for(const[t,o]of Object.entries(r))Array.isArray(o)?(Array.isArray(e[t])||(e[t]=[]),e[t]=e[t].push(...o)):null!=o&&"object"==typeof o?(null!=e[t]&&"object"==typeof e[t]||(e[t]={}),j(e[t],o)):void 0!==e[t]&&null==o||(e[t]=o);return e}function k(e){const t=document.createElement("div");return t.innerText=e,t.innerHTML}function O(e){return Array.isArray(e)?e:[e]}function I(e){return Dt(e,{rules:Lt,indent:"　",depth:2})}class Gt extends Error{constructor(e,t,r){super(e),this.value=t,this.type=r}}var M;!function(e){e.INLINE="INLINE",e.MULTILINE="MULTILINE",e.RICH="RICH"}(M||(M={}));const xt={[M.INLINE]:"TextInput",[M.MULTILINE]:"TextArea",[M.RICH]:"RichTextEditor"},Ht={[M.INLINE]:"string",[M.MULTILINE]:"multilineString",[M.RICH]:"richTextString"},Bt={[M.INLINE]:"string",[M.MULTILINE]:"multiline_string",[M.RICH]:"multiline_string"};class Ft{constructor({defaultValue:e,inputType:t}={}){this.defaultValue=null!=e?e:"",this.inputType=null!=t?t:M.INLINE}validate(e){if("string"!=typeof e)throw new Gt(`不能将 ${I(e)} 分配给 ${D(this)}`,e,this);return!0}getSameDirectionChildren(){return[]}getReverseDirectionChildren(){return[]}toCoCoPropertyValueTypes(){return{editorType:xt[this.inputType],valueType:"string",checkType:"string",defaultValue:k(this.defaultValue)}}toCoCoMethodParamValueTypes(){return{valueType:Ht[this.inputType],checkType:"string",defaultValue:k(this.defaultValue)}}toCoCoMethodValueTypes(){return{valueType:"string"}}toCoCoEventParamValueTypes(){return{valueType:"string"}}toCreationProjectPropValueTypes(){return{valueType:"string",defaultValue:this.defaultValue}}toCreationProjectMethodParamValueTypes(){return{valueType:Bt[this.inputType],defaultValue:this.defaultValue}}toCreationProjectMethodValueTypes(){return{valueType:"string"}}toCreationProjectEmitParamValueTypes(){return{valueType:"string"}}}class qt{constructor({defaultValue:e=0,range:t}={}){this.defaultValue=null!=e?e:0,this.range=t}validate(e){if("number"!=typeof e)throw new Gt(`不能将 ${I(e)} 分配给 ${D(this)}`,e,this);if(null!=this.range&&!this.range.includes(e))throw new Gt(`不能将 ${I(e)} 分配给 ${D(this)}：整数超出范围`,e,this);return!0}getSameDirectionChildren(){return[]}getReverseDirectionChildren(){return[]}toCoCoPropertyValueTypes(){return{valueType:"number",defaultValue:this.defaultValue}}toCoCoMethodParamValueTypes(){return{valueType:"number",defaultValue:this.defaultValue}}toCoCoMethodValueTypes(){return{valueType:"number"}}toCoCoEventParamValueTypes(){return{valueType:"number"}}toCreationProjectPropValueTypes(){return{valueType:"number",defaultValue:this.defaultValue}}toCreationProjectMethodParamValueTypes(){return{valueType:"number",defaultValue:this.defaultValue}}toCreationProjectMethodValueTypes(){return{valueType:"number"}}toCreationProjectEmitParamValueTypes(){return{valueType:"number"}}}class Ut{constructor({defaultValue:e,range:t}={}){this.defaultValue=null!=e?e:0,this.range=t}validate(e){if("number"!=typeof e)throw new Gt(`不能将 ${I(e)} 分配给 ${D(this)}`,e,this);if(null!=this.range&&!this.range.includes(e))throw new Gt(`不能将 ${I(e)} 分配给 ${D(this)}：数字超出范围`,e,this);return!0}getSameDirectionChildren(){return[]}getReverseDirectionChildren(){return[]}toCoCoPropertyValueTypes(){return{valueType:"number",defaultValue:this.defaultValue}}toCoCoMethodParamValueTypes(){return{valueType:"number",defaultValue:this.defaultValue}}toCoCoMethodValueTypes(){return{valueType:"number"}}toCoCoEventParamValueTypes(){return{valueType:"number"}}toCreationProjectPropValueTypes(){return{valueType:"number",defaultValue:this.defaultValue}}toCreationProjectMethodParamValueTypes(){return{valueType:"number",defaultValue:this.defaultValue}}toCreationProjectMethodValueTypes(){return{valueType:"number"}}toCreationProjectEmitParamValueTypes(){return{valueType:"number"}}}class Jt{constructor({defaultValue:e}={}){this.defaultValue=null!=e&&e}validate(e){if("boolean"!=typeof e)throw new Gt(`不能将 ${I(e)} 分配给 ${D(this)}`,e,this);return!0}getSameDirectionChildren(){return[]}getReverseDirectionChildren(){return[]}toCoCoPropertyValueTypes(){return{valueType:"boolean",defaultValue:this.defaultValue}}toCoCoMethodParamValueTypes(){return{valueType:"boolean",defaultValue:this.defaultValue}}toCoCoMethodValueTypes(){return{valueType:"boolean"}}toCoCoEventParamValueTypes(){return{valueType:"boolean"}}toCreationProjectPropValueTypes(){return{valueType:"boolean",defaultValue:this.defaultValue}}toCreationProjectMethodParamValueTypes(){return{valueType:"boolean",defaultValue:this.defaultValue}}toCreationProjectMethodValueTypes(){return{valueType:"boolean"}}toCreationProjectEmitParamValueTypes(){return{valueType:"boolean"}}}class zt{constructor({defaultValue:e}={}){this.defaultValue=null!=e?e:""}validate(e){return!0}getSameDirectionChildren(){return[]}getReverseDirectionChildren(){return[]}toCoCoPropertyValueTypes(){return{valueType:["string","number","boolean","array","object"],defaultValue:k("string"==typeof this.defaultValue?this.defaultValue:JSON.stringify(this.defaultValue))}}toCoCoMethodParamValueTypes(){return{valueType:["string","number","boolean","array","object"],defaultValue:k("string"==typeof this.defaultValue?this.defaultValue:JSON.stringify(this.defaultValue))}}toCoCoMethodValueTypes(){return{valueType:["string","number","boolean","array","object"]}}toCoCoEventParamValueTypes(){return{valueType:["string","number","boolean","array","object"]}}toCreationProjectPropValueTypes(){return{valueType:"string",defaultValue:this.defaultValue}}toCreationProjectMethodParamValueTypes(){return{valueType:"string",defaultValue:this.defaultValue}}toCreationProjectMethodValueTypes(){return{valueType:"string"}}toCreationProjectEmitParamValueTypes(){return{valueType:"string"}}}var A,N,L,R;!function(e){e.DROPDOWN="INLINE",e.OPTION_SWITCH="OPTION_SWITCH"}(A||(A={}));class Yt{constructor({entries:e,inputType:t}){this.entries=e,this.inputType=null!=t?t:A.DROPDOWN,this.valueToLabelMap={};for(const t of e)this.valueToLabelMap[t.value]=t.label;this.values=e.map((e=>e.value))}validate(e){if("string"!=typeof e||!this.values.includes(e))throw new Gt(`不能将 ${I(e)} 分配给 ${D(this)}`,e,this);return!0}getSameDirectionChildren(){return[]}getReverseDirectionChildren(){return[]}toCoCoPropertyValueTypes(){return{editorType:this.inputType==A.DROPDOWN?void 0:"OptionSwitch",dropdown:this.entries}}toCoCoMethodParamValueTypes(){return{dropdown:this.entries}}toCoCoMethodValueTypes(){return{valueType:"string"}}toCoCoEventParamValueTypes(){return{valueType:"string"}}toCreationProjectPropValueTypes(){return{valueType:"dropdown",dropdown:this.entries.map((e=>[e.label,e.value]))}}toCreationProjectMethodParamValueTypes(){return{valueType:"dropdown",dropdown:this.entries.map((e=>[e.label,e.value]))}}toCreationProjectMethodValueTypes(){return{valueType:"string"}}toCreationProjectEmitParamValueTypes(){return{valueType:"string"}}}class Xt{constructor({propertiesType:e,defaultValue:t}={}){this.propertiesType=e,this.defaultValue=null!=t?t:this.toInlineString()}toInlineString(){return D(this,[{test:e=>e instanceof Xt,prepare(e,t,r){if(null!=e.propertiesType)for(const o of Object.values(e.propertiesType))(new be).prepare(o,t,r)},toString(e,t,r){let o="字典";if(null!=e.propertiesType){o+=` { ${Object.entries(e.propertiesType).map((([e,o])=>`${e}: ${(new be).toString(o,t,r)}`)).join("; ")} }`}return o}}])}validate(e){if(null==e||"object"!=typeof e)throw new Gt(`不能将 ${I(e)} 分配给 ${D(this)}`,e,this);if(null!=this.propertiesType){const t=[];for(const[r,o]of Object.entries(this.propertiesType))try{W(`属性 ${r}`,e[r],o)}catch(e){if(!(e instanceof Gt))throw e;t.push(e)}if(0!=t.length)throw new Gt(`不能将 ${I(e)} 分配给 ${D(this)}\n`+t.map((e=>e.message.split("\n").map((e=>`　${e}`)).join("\n"))).join("\n"),e,this)}return!0}getSameDirectionChildren(){return null==this.propertiesType?[]:Object.entries(this.propertiesType).map((([e,t])=>({key:`__slightning_coco_widget_object_property__${e}`,label:`字典属性·${e}`,type:t})))}getReverseDirectionChildren(){return[]}toCoCoPropertyValueTypes(){return{valueType:["string","object"],checkType:"string",defaultValue:k("string"==typeof this.defaultValue?this.defaultValue:JSON.stringify(this.defaultValue))}}toCoCoMethodParamValueTypes(){return{valueType:["string","object"],checkType:"string",defaultValue:k("string"==typeof this.defaultValue?this.defaultValue:JSON.stringify(this.defaultValue))}}toCoCoMethodValueTypes(){return{valueType:"object"}}toCoCoEventParamValueTypes(){return{valueType:"object"}}toCreationProjectPropValueTypes(){return{valueType:"object",defaultValue:this.defaultValue}}toCreationProjectMethodParamValueTypes(){return{valueType:"object",defaultValue:this.defaultValue}}toCreationProjectMethodValueTypes(){return{valueType:"object"}}toCreationProjectEmitParamValueTypes(){return{valueType:"object"}}}class Kt{constructor({itemType:e,defaultValue:t}={}){this.itemType=e,this.defaultValue=null!=t?t:D(this)}validate(e){if(!Array.isArray(e))throw new Gt(`不能将 ${I(e)} 分配给 ${D(this)}`,e,this);if(null!=this.itemType){const t=[];for(const[e,r]of Object.entries(t))try{W(`第 ${e} 项`,r,this.itemType)}catch(e){if(!(e instanceof Gt))throw e;t.push(e)}if(0!=t.length)throw new Gt(`不能将 ${I(e)} 分配给 ${D(this)}\n`+t.map((e=>e.message.split("\n").map((e=>`　${e}`)).join("\n"))).join("\n"),e,this)}return!0}getSameDirectionChildren(){return null==this.itemType?[]:[{key:"__slightning_coco_widget_array_item__",label:"数组项",type:this.itemType}]}getReverseDirectionChildren(){return[]}toCoCoPropertyValueTypes(){return{valueType:["string","array"],checkType:"string",defaultValue:k("string"==typeof this.defaultValue?this.defaultValue:JSON.stringify(this.defaultValue))}}toCoCoMethodParamValueTypes(){return{valueType:["string","array"],checkType:"string",defaultValue:k("string"==typeof this.defaultValue?this.defaultValue:JSON.stringify(this.defaultValue))}}toCoCoMethodValueTypes(){return{valueType:"array"}}toCoCoEventParamValueTypes(){return{valueType:"array"}}toCreationProjectPropValueTypes(){return{valueType:"array",defaultValue:this.defaultValue}}toCreationProjectMethodParamValueTypes(){return{valueType:"array",defaultValue:this.defaultValue}}toCreationProjectMethodValueTypes(){return{valueType:"array"}}toCreationProjectEmitParamValueTypes(){return{valueType:"array"}}}class Qt{constructor({defaultValue:e}={}){this.defaultValue=null!=e?e:"#000000"}validate(e){if("string"!=typeof e)throw new Gt(`不能将 ${I(e)} 分配给 ${D(this)}`,e,this);return!0}getSameDirectionChildren(){return[]}getReverseDirectionChildren(){return[]}toCoCoPropertyValueTypes(){return{valueType:"color",defaultValue:k(this.defaultValue)}}toCoCoMethodParamValueTypes(){return{valueType:"color",defaultValue:k(this.defaultValue)}}toCoCoMethodValueTypes(){return{valueType:"color"}}toCoCoEventParamValueTypes(){return{valueType:"color"}}toCreationProjectPropValueTypes(){return{valueType:"color",defaultValue:this.defaultValue}}toCreationProjectMethodParamValueTypes(){return{valueType:"color",defaultValue:this.defaultValue}}toCreationProjectMethodValueTypes(){return{valueType:"color"}}toCreationProjectEmitParamValueTypes(){return{valueType:"color"}}}class Zt{constructor({defaultValue:e}={}){this.defaultValue=null!=e?e:"?"}validate(e){if("string"!=typeof e)throw new Gt(`不能将 ${I(e)} 分配给 ${D(this)}`,e,this);return!0}getSameDirectionChildren(){return[]}getReverseDirectionChildren(){return[]}toCoCoPropertyValueTypes(){return{valueType:"image",defaultValue:k(this.defaultValue)}}toCoCoMethodParamValueTypes(){return{valueType:"image",defaultValue:k(this.defaultValue)}}toCoCoMethodValueTypes(){return{valueType:"image"}}toCoCoEventParamValueTypes(){return{valueType:"image"}}toCreationProjectPropValueTypes(){return{valueType:"image",defaultValue:this.defaultValue}}toCreationProjectMethodParamValueTypes(){return{valueType:"image",defaultValue:this.defaultValue}}toCreationProjectMethodValueTypes(){return{valueType:"image"}}toCreationProjectEmitParamValueTypes(){return{valueType:"image"}}}class er{constructor({defaultValue:e}={}){this.defaultValue=null!=e?e:"?"}validate(e){if("string"!=typeof e)throw new Gt(`不能将 ${I(e)} 分配给 ${D(this)}`,e,this);return!0}getSameDirectionChildren(){return[]}getReverseDirectionChildren(){return[]}toCoCoPropertyValueTypes(){return{valueType:"string",defaultValue:k(this.defaultValue)}}toCoCoMethodParamValueTypes(){return{valueType:"string",defaultValue:k(this.defaultValue)}}toCoCoMethodValueTypes(){return{valueType:"string"}}toCoCoEventParamValueTypes(){return{valueType:"string"}}toCreationProjectPropValueTypes(){return{valueType:"string",defaultValue:this.defaultValue}}toCreationProjectMethodParamValueTypes(){return{valueType:"audio",defaultValue:this.defaultValue}}toCreationProjectMethodValueTypes(){return{valueType:"string"}}toCreationProjectEmitParamValueTypes(){return{valueType:"string"}}}class tr{constructor(...e){var t;this.types=e;for(const t of e)if("defaultValue"in t&&("string"==typeof t.defaultValue||"number"==typeof t.defaultValue||"boolean"==typeof t.defaultValue)){this.defaultValue=t.defaultValue;break}null!==(t=this.defaultValue)&&void 0!==t||(this.defaultValue="")}toString(){return 0==this.types.length?"（不存在）":this.types.join(" | ")}validate(e){const t=[];for(const r of this.types)try{if(W(null,e,r))return!0}catch(e){if(!(e instanceof Gt))throw e;t.push(e)}throw new Gt(`不能将 ${I(e)} 分配给 ${D(this)}\n`+t.map((e=>e.message.split("\n").map((e=>`　${e}`)).join("\n"))).join("\n"),e,this)}getSameDirectionChildren(){var e,t,r;const o=[];for(let n=0;n<this.types.length;n++){const i=this.types[n];null!=i&&o.push({key:`__slightning_coco_widget_union_type_child__${n}_${null!==(r=null===(t=null===(e=Object.getPrototypeOf(i))||void 0===e?void 0:e.constructor)||void 0===t?void 0:t.name)&&void 0!==r?r:"unknown"}`,label:String(n),type:i})}return o}getReverseDirectionChildren(){return[]}toCoCoPropertyValueTypes(){const e=[];for(const t of this.types){const{valueType:r}=t.toCoCoMethodValueTypes();Array.isArray(r)?e.push(...r):null!=r&&e.push(r)}return{valueType:e,defaultValue:this.defaultValue}}toCoCoMethodParamValueTypes(){const e=[];for(const t of this.types){const{valueType:r}=t.toCoCoMethodValueTypes();Array.isArray(r)?e.push(...r):null!=r&&e.push(r)}return{valueType:e,defaultValue:this.defaultValue}}toCoCoMethodValueTypes(){const e=[];for(const t of this.types){const{valueType:r}=t.toCoCoMethodValueTypes();Array.isArray(r)?e.push(...r):null!=r&&e.push(r)}return{valueType:e}}toCoCoEventParamValueTypes(){const e=[];for(const t of this.types){const{valueType:r}=t.toCoCoMethodValueTypes();Array.isArray(r)?e.push(...r):null!=r&&e.push(r)}return{valueType:e}}toCreationProjectPropValueTypes(){throw new Error(`不能将 ${D(this)} 转为 Creation Project 属性类型`)}toCreationProjectMethodParamValueTypes(){return{valueType:"any",defaultValue:this.defaultValue}}toCreationProjectMethodValueTypes(){return{valueType:"any"}}toCreationProjectEmitParamValueTypes(){return{valueType:"any"}}}class rr{constructor({defaultValue:e}={}){this.defaultValue=null!=e?e:"?"}validate(e){if("string"!=typeof e)throw new Gt(`不能将 ${I(e)} 分配给 ${D(this)}`,e,this);return!0}getSameDirectionChildren(){return[]}getReverseDirectionChildren(){return[]}toCoCoPropertyValueTypes(){return{valueType:"string",defaultValue:k(this.defaultValue)}}toCoCoMethodParamValueTypes(){return{valueType:"string",defaultValue:k(this.defaultValue)}}toCoCoMethodValueTypes(){return{valueType:"string"}}toCoCoEventParamValueTypes(){return{valueType:"string"}}toCreationProjectPropValueTypes(){return{valueType:"string",defaultValue:this.defaultValue}}toCreationProjectMethodParamValueTypes(){return{valueType:"video",defaultValue:this.defaultValue}}toCreationProjectMethodValueTypes(){return{valueType:"string"}}toCreationProjectEmitParamValueTypes(){return{valueType:"string"}}}class or{constructor({theClass:e,defaultValue:t}){this.theClass=e,this.defaultValue=null!=t?t:""}validate(e){if(!(e instanceof this.theClass))throw new Gt(`不能将 ${I(e)} 分配给 ${D(this)}`,e,this);return!0}getSameDirectionChildren(){return[]}getReverseDirectionChildren(){return[]}toCoCoPropertyValueTypes(){return{valueType:["string","object"],checkType:"string",defaultValue:k(this.defaultValue)}}toCoCoMethodParamValueTypes(){return{valueType:["string","object"],checkType:"string",defaultValue:k(this.defaultValue)}}toCoCoMethodValueTypes(){return{valueType:"object"}}toCoCoEventParamValueTypes(){return{valueType:"object"}}toCreationProjectPropValueTypes(){return{valueType:"object",defaultValue:this.defaultValue}}toCreationProjectMethodParamValueTypes(){return{valueType:"object",defaultValue:this.defaultValue}}toCreationProjectMethodValueTypes(){return{valueType:"object"}}toCreationProjectEmitParamValueTypes(){return{valueType:"object"}}}class nr{constructor({block:e,returns:t,throws:r,defaultValue:o,raw:n}){this.block=e,this.returns=t,this.throws=r,this.defaultValue=o,this.raw=null!=n&&n}validate(e){if("function"!=typeof e)throw new Gt(`不能将 ${I(e)} 分配给 ${D(this)}`,e,this);return!0}getSameDirectionChildren(){const e=[];return null!=this.returns&&e.push({key:"__slightning_coco_widget_function_return_value__",label:"函数返回值",type:this.returns}),null!=this.throws&&e.push({key:"__slightning_coco_widget_function_throw_value__",label:"函数抛出值",type:this.throws}),e}getReverseDirectionChildren(){const e=[];for(const t of this.block)"object"==typeof t&&e.push({key:`__slightning_coco_widget_function_param__${t.key}`,label:`函数参数·${t.label}`,type:t.type});return e}toCoCoPropertyValueTypes(){var e;return{valueType:["string","number","boolean","array","object"],checkType:"string",defaultValue:k(null!==(e=this.defaultValue)&&void 0!==e?e:D(this))}}toCoCoMethodParamValueTypes(){var e;return{valueType:["string","number","boolean","array","object"],checkType:"string",defaultValue:k(null!==(e=this.defaultValue)&&void 0!==e?e:D(this))}}toCoCoMethodValueTypes(){return{valueType:["string","number","boolean","array","object"]}}toCoCoEventParamValueTypes(){return{valueType:["string","number","boolean","array","object"]}}toCreationProjectPropValueTypes(){var e;return{valueType:"object",defaultValue:null!==(e=this.defaultValue)&&void 0!==e?e:D(this)}}toCreationProjectMethodParamValueTypes(){var e;if(!this.raw&&(null==this.returns||this.returns instanceof ir)&&(null==this.throws||this.throws instanceof ir)){const e=[];for(const t of this.block)"object"==typeof t&&e.push(Object.assign({key:t.key,label:t.label},t.type.toCreationProjectEmitParamValueTypes()));return{valueType:"code",codeParams:e}}return{valueType:"object",defaultValue:null!==(e=this.defaultValue)&&void 0!==e?e:D(this)}}toCreationProjectMethodValueTypes(){return{valueType:"object"}}toCreationProjectEmitParamValueTypes(){return{valueType:"object"}}}function W(e,t,r){let o=null,n=!1;try{n=r.validate(t)}catch(e){if(!(e instanceof Gt))throw e;o=e.message}if(n||null!=o||(o=`不能将 ${I(t)} 分配给 ${r.toString()}`),null!=o)throw null!=e&&(o=`${e}：${o}`),new Gt(o,t,r);return!0}function D(e,t=[]){return Dt(e,{rules:[...t,{test:e=>e instanceof ir,toString:(e,t)=>"无"},{test:e=>e instanceof Ft,toString:(e,t)=>"字符串"},{test:e=>e instanceof qt,toString(e,t){let r="整数";return null!=e.range&&(r+=e.range.toString()),r}},{test:e=>e instanceof Ut,toString(e,t){let r="数字";return null!=e.range&&(r+=e.range.toString()),r}},{test:e=>e instanceof Jt,toString:(e,t)=>"布尔"},{test:e=>e instanceof zt,toString:(e,t)=>"任意"},{test:e=>e instanceof Yt,toString:(e,t)=>`(${e.values.map((e=>JSON.stringify(e))).join(" | ")})`},{test:e=>e instanceof Xt,prepare(e,t,r){if(null!=e.propertiesType)for(const o of Object.values(e.propertiesType))(new be).prepare(o,t,r)},toString(e,t){let r="字典";if(null!=e.propertiesType){const t=Object.entries(e.propertiesType).map((([e,t])=>`${e}: ${t.toString()}`)).join("\n");r+=` {\n${t}\n}`}return r}},{test:e=>e instanceof Kt,prepare(e,t,r){null!=e.itemType&&(new be).prepare(e.itemType,t,r)},toString(e,t){let r="列表";return null!=e.itemType&&(r+=`<${e.itemType.toString()}>`),r}},{test:e=>e instanceof Qt,toString:(e,t)=>"颜色"},{test:e=>e instanceof Zt,toString:(e,t)=>"图像"},{test:e=>e instanceof er,toString:(e,t)=>"音频"},{test:e=>e instanceof rr,toString:(e,t)=>"视频"},{test:e=>e instanceof tr,prepare(e,t,r){for(const o of e.types)(new be).prepare(o,t,r)},toString:(e,t)=>`(${e.types.map((e=>D(e))).join(" | ")})`},{test:e=>e instanceof or,toString:(e,t)=>`[Object ${e.theClass.name}]`},{test:e=>e instanceof nr,prepare(e,t,r){if(null!=e.block)for(const o of e.block)"object"==typeof o&&(new be).prepare(o.type,t,r);null!=e.returns&&(new be).prepare(e.returns,t,r),null!=e.throws&&(new be).prepare(e.throws,t,r)},toString(e,t){var r;let o="(",n=!0;for(const t of e.block)"object"==typeof t&&(n?n=!1:o+=", ",o+=`${t.label}: ${t.type.toString()}`);return o+=`) => ${(null!==(r=e.returns)&&void 0!==r?r:new ir).toString()}`,null!=e.throws&&(o+=` 抛出 ${e.throws.toString()}`),o}}]})}class ir{validate(e){if(void 0!==e)throw new Gt(`不能将 ${I(e)} 分配给 ${D(this)}`,e,this);return!0}toCoCoPropertyValueTypes(){throw new Error(`不能将 ${D(this)} 作为属性类型`)}getSameDirectionChildren(){return[]}getReverseDirectionChildren(){return[]}toCoCoMethodParamValueTypes(){throw new Error(`不能将 ${D(this)} 作为方法参数类型`)}toCoCoMethodValueTypes(){return{}}toCoCoEventParamValueTypes(){throw new Error(`不能将 ${D(this)} 作为事件参数类型`)}toCreationProjectPropValueTypes(){throw new Error(`不能将 ${D(this)} 作为属性类型`)}toCreationProjectMethodParamValueTypes(){throw new Error(`不能将 ${D(this)} 作为方法参数类型`)}toCreationProjectMethodValueTypes(){return{}}toCreationProjectEmitParamValueTypes(){throw new Error(`不能将 ${D(this)} 作为属性类型`)}}!function(e){e.WEB="web",e.ANDROID="android",e.IOS="ios"}(N||(N={})),function(e){e.THIS="$this",e.METHOD="$method"}(L||(L={})),function(e){e.GREY="#BABABA",e.RED="#DB6656",e.BROWN="#D67B18",e.YELLOW="#C7C100",e.CYAN="#00ACE8",e.GREEN="#6AC44C",e.BLUE="#588AF6",e.PURPLE="#9D80E7",e.PINKISH_PURPLE="#C571D8",e.PINK="#D16CB0"}(R||(R={}));const lr={"icon-dialog":"https://creation.bcmcdn.com/716/appcraft/IMAGE_SXY4eTgli_1738894324586.svg","icon-scan-qr-code":"https://creation.bcmcdn.com/716/appcraft/IMAGE_EImzw5odGZ_1738894324587.svg","icon-widget-actor":"https://creation.bcmcdn.com/716/appcraft/IMAGE_YVXz1URINQ_1738894324588.svg","icon-widget-audio":"https://creation.bcmcdn.com/716/appcraft/IMAGE_LPAJGpF1X__1738894324589.svg","icon-widget-brush":"https://creation.bcmcdn.com/716/appcraft/IMAGE_iqAvN4M-3L_1738894324591.svg","icon-widget-button":"https://creation.bcmcdn.com/716/appcraft/IMAGE_ygdSsuBTM1_1738894324591.svg","icon-widget-camera":"https://creation.bcmcdn.com/716/appcraft/IMAGE_vBhQu3HklT_1738894324592.svg","icon-widget-canvas":"https://creation.bcmcdn.com/716/appcraft/IMAGE_HyX2I21HIe_1738894324594.svg","icon-widget-checkbox":"https://creation.bcmcdn.com/716/appcraft/IMAGE_L23GJxU5uG_1738894324595.svg","icon-widget-cloud-dict":"https://creation.bcmcdn.com/716/appcraft/IMAGE_BTRdhvrb2l_1738894324598.svg","icon-widget-cloud-room":"https://creation.bcmcdn.com/716/appcraft/IMAGE_ZcerLC7GOC_1738894324596.svg","icon-widget-cloud-table":"https://creation.bcmcdn.com/716/appcraft/IMAGE_U1NBmrg2QF_1738894324597.svg","icon-widget-contact-picker":"https://creation.bcmcdn.com/716/appcraft/IMAGE_eh7WY4vim9_1738894324599.svg","icon-widget-date-picker":"https://creation.bcmcdn.com/716/appcraft/IMAGE_5BNwaBk_IW_1738894324600.svg","icon-widget-gyroscope":"https://creation.bcmcdn.com/716/appcraft/IMAGE_3a09PLSPRQ_1738894324601.svg","icon-widget-http-client":"https://creation.bcmcdn.com/716/appcraft/IMAGE_yf_9_ekNHu_1738894324602.svg","icon-widget-image":"https://creation.bcmcdn.com/716/appcraft/IMAGE_4sZuSDFkqIl_1738894324603.svg","icon-widget-input":"https://creation.bcmcdn.com/716/appcraft/IMAGE_-EIWoX7ctRl_1738894324604.svg","icon-widget-list-viewer":"https://creation.bcmcdn.com/716/appcraft/IMAGE_CizHBYub3vx_1738894324605.svg","icon-widget-local-storage":"https://creation.bcmcdn.com/716/appcraft/IMAGE_Nfe5M_-XqCq_1738894324606.svg","icon-widget-pedometer":"https://creation.bcmcdn.com/716/appcraft/IMAGE_Uch6b-t83Fb_1738894324607.svg","icon-widget-phone-dialer":"https://creation.bcmcdn.com/716/appcraft/IMAGE_opGSFk3ryK6_1738894324608.svg","icon-widget-qrcode":"https://creation.bcmcdn.com/716/appcraft/IMAGE_SKZ06Rea3il_1738894324609.svg","icon-widget-radio":"https://creation.bcmcdn.com/716/appcraft/IMAGE_XsGEG6vcofk_1738894324611.svg","icon-widget-slider copy 10":"https://creation.bcmcdn.com/716/appcraft/IMAGE_fSfhBEcYJIe_1738894324612.svg","icon-widget-slider":"https://creation.bcmcdn.com/716/appcraft/IMAGE_EBUvZe43pi__1738894324613.svg","icon-widget-sms-service":"https://creation.bcmcdn.com/716/appcraft/IMAGE_-X_DA7es5AM_1738894324614.svg","icon-widget-switch":"https://creation.bcmcdn.com/716/appcraft/IMAGE_aSqQWV61Wod_1738894324615.svg","icon-widget-table-data":"https://creation.bcmcdn.com/716/appcraft/IMAGE_cQVMUNMWXJT_1738894324616.svg","icon-widget-text":"https://creation.bcmcdn.com/716/appcraft/IMAGE_28OpuQ0Vq5i_1738894324617.svg","icon-widget-time-picker":"https://creation.bcmcdn.com/716/appcraft/IMAGE_ISJT89rx6kI_1738894324618.svg","icon-widget-timer":"https://creation.bcmcdn.com/716/appcraft/IMAGE_gh8hy5hUCnq_1738894324619.svg","icon-widget-volume-sensor":"https://creation.bcmcdn.com/716/appcraft/IMAGE_HKqL2kStbYN_1738894324620.svg","icon-widget-web-view":"https://creation.bcmcdn.com/716/appcraft/IMAGE_QR6adggz8xb_1738894324621.svg"},ar={};function G(e){var t,r,o,n,i,l;return{type:e.type,title:e.info.title,icon:e.info.icon,version:null!==(t=e.info.version)&&void 0!==t?t:void 0,docs:{url:null!==(o=null===(r=e.info.url)||void 0===r?void 0:r.docs)&&void 0!==o?o:void 0},isInvisibleWidget:!e.options.visible,isGlobalWidget:e.options.global,platforms:null!==(n=e.options.platforms)&&void 0!==n?n:void 0,hasAnyWidget:null!==(i=e.options.any)&&void 0!==i?i:void 0,properties:x(e.properties),methods:H(e.methods),events:(l=e.events,l.map((e=>{var t,r,o,n,i,l,a;const s={key:e.key,subTypes:null!==(t=e.subTypes)&&void 0!==t?t:void 0,label:null!==(o=null===(r=e.blockOptions)||void 0===r?void 0:r.deprecated)&&void 0!==o&&o?`[已弃用] ${e.label}`:e.label,params:e.params.map((e=>Object.assign({key:e.key,label:e.label},e.type.toCoCoEventParamValueTypes()))),tooltip:null!==(n=e.tooltip)&&void 0!==n?n:void 0,blockOptions:{icon:null!==(l=null===(i=e.blockOptions)||void 0===i?void 0:i.icon)&&void 0!==l?l:void 0}};null!=e.subTypes&&B(e.subTypes,0,[e.key],[e.key],[e.label],e);const u=null!==(a=e.blockOptions)&&void 0!==a?a:{};return null!=u.deprecated&&(s.label=`[已弃用] ${s.label}`),"string"==typeof u.deprecated?null==s.tooltip?s.tooltip=`该事件已弃用：${u.deprecated}`:s.tooltip=`${s.tooltip}\n\n该事件已弃用：${u.deprecated}`:u.deprecated&&(null==s.tooltip?s.tooltip="该事件已弃用，并且可能在未来版本中移除，请尽快迁移到其他事件":s.tooltip=`${s.tooltip}\n\n该事件已弃用，并且可能在未来版本中移除，请尽快迁移到其他事件`),s})))}}function x(e){const t=[];return function e(r){var o,n,i,l,a,s,u,c;for(const p of r)if("contents"in p)e(p.contents);else{if(null!=(null===(o=p.blockOptions)||void 0===o?void 0:o.get)&&"object"==typeof p.blockOptions.get&&null!=p.blockOptions.get.key)throw new Error(`无法将属性 ${p.label} 的取值函数转为 CoCo 类型`);if(null!=(null===(n=p.blockOptions)||void 0===n?void 0:n.set)&&"object"==typeof p.blockOptions.set&&null!=p.blockOptions.set.key)throw new Error(`无法将属性 ${p.label} 的赋值函数转为 CoCo 类型`);t.push(Object.assign(Object.assign({key:p.key,label:p.label},p.type.toCoCoPropertyValueTypes()),{blockOptions:{getter:{generateBlock:"object"==typeof(null===(i=p.blockOptions)||void 0===i?void 0:i.get)||null===(a=null===(l=p.blockOptions)||void 0===l?void 0:l.get)||void 0===a||a},setter:{generateBlock:"object"==typeof(null===(s=p.blockOptions)||void 0===s?void 0:s.set)||null===(c=null===(u=p.blockOptions)||void 0===u?void 0:u.set)||void 0===c||c}}}))}}(e),t}function H(e){const t=[];let r=null,o=!1;return function e(n,i=[],l={}){var a,s,u,c,p,d,f,y,g,h,v;let w=!0;for(const m of n){if("contents"in m){null==m.label?e(m.contents,i,j({},l,null!==(a=m.blockOptions)&&void 0!==a?a:{})):(o=!0,e(m.contents,[...i,m.label],j({},l,null!==(s=m.blockOptions)&&void 0!==s?s:{})),o=!0),w=!0;continue}if(null!=m.throws&&!(m.throws instanceof ir))throw new Error(`无法将方法 ${m.label} 的抛出类型转为 CoCo 类型`);const T=j({},l,null!==(u=m.blockOptions)&&void 0!==u?u:{}),V=Object.assign(Object.assign({key:m.key,params:[]},null===(c=m.returns)||void 0===c?void 0:c.toCoCoMethodValueTypes()),{tooltip:null!==(p=m.tooltip)&&void 0!==p?p:void 0,blockOptions:{callMethodLabel:!1,icon:null!==(d=T.icon)&&void 0!==d?d:void 0,color:T.deprecated?R.GREY:null!==(f=T.color)&&void 0!==f?f:void 0,inputsInline:null!==(y=T.inline)&&void 0!==y?y:void 0}});if("string"==typeof T.deprecated?null==V.tooltip?V.tooltip=`该方法已弃用：${T.deprecated}`:V.tooltip=`${V.tooltip}\n\n该方法已弃用：${T.deprecated}`:T.deprecated&&(null==V.tooltip?V.tooltip="该方法已弃用，并且可能在未来版本中移除，请尽快迁移到其他方法":V.tooltip=`${V.tooltip}\n\n该方法已弃用，并且可能在未来版本中移除，请尽快迁移到其他方法`),null!==(g=V.blockOptions)&&void 0!==g||(V.blockOptions={}),null===(h=T.inline)||void 0===h||h){let C=null,S=[];if(null!=T.deprecated&&S.push("[已弃用]"),!m.block.includes(L.THIS))throw new Error(`方法 ${m.label} 缺少 this 参数`);for(let E=0;E<m.block.length;E++){const P=m.block[E];if(P==L.METHOD)S.push(m.label);else{if(P==L.THIS){C=m.block.slice(E+1);break}if("string"==typeof P)S.push(P);else if(null!=P)throw new Error(`方法 ${m.label} 的积木 this 参数前存在他参数，不能将其转为 CoCo 类型`)}}if(null==C)throw new Error(`方法 ${m.label} 缺少 this 参数`);0!=S.length&&(V.blockOptions.callMethodLabel=S.join(" "));let _=null;function b(e){null==_?null==V.label?V.label=e:V.label=`${V.label} ${e}`:null==_.labelAfter?_.labelAfter=e:_.labelAfter=`${_.labelAfter} ${e}`}for(const $ of C){if($==L.THIS)throw new Error(`方法只能有一个 this 参数，而方法 ${m.label} 有多个 this 参数`);$==L.METHOD?b(m.label):"string"==typeof $?b($):(_=Object.assign({key:$.key},$.type.toCoCoMethodParamValueTypes()),V.params.push(_))}}else{null!=T.deprecated&&(V.blockOptions.callMethodLabel="[已弃用]"),V.blockOptions.inputsInline=!1,V.label=m.label;for(const k of m.block)"object"==typeof k&&V.params.push(Object.assign({key:k.key,label:k.label},k.type.toCoCoMethodParamValueTypes()))}w&&(w=!1,o&&(o=!1,V.blockOptions.line=i.join("·")),null!=r&&(null!==(v=r.blockOptions)&&void 0!==v||(r.blockOptions={}),r.blockOptions.space=40)),r=V,t.push(V)}}(e),t}function B(e,t,r,o,n,i){if(t>=e.length)return void(ar[o.join("")]=r.join(""));const l=e[t];var a;if(null!=l)for(const s of l.dropdown)B(e,t+1,[...r,s.value],[...o,(a=s.value,a.charAt(0).toUpperCase()+a.slice(1))],[...n,s.label],i);else B(e,t+1,r,o,n,i)}function F(e){return/^https?:\/\/coco\.codemao\.cn\/editor\/((#|\?).*)?$/.test(e.location.href)}function q(){if(F(window))return window;try{if(parent!=window&&F(parent))return parent}catch(e){}try{if(opener instanceof Window&&F(opener))return opener}catch(e){}return null}function U(){var e,t,r;return null!==(r=null===(t=null===(e=q())||void 0===e?void 0:e.document.querySelector('input[placeholder="请输入作品名称"]'))||void 0===t?void 0:t.value)&&void 0!==r?r:null}function J(){var e,t;return null!==(t=null===(e=q())||void 0===e?void 0:e.document.querySelector('[class^="style_playButton"]'))&&void 0!==t?t:null}function z(){var e,t;return/[\s]*停[\s]*止[\s]*/.test(null!==(t=null===(e=J())||void 0===e?void 0:e.textContent)&&void 0!==t?t:"")}const sr={getSuperWidget:e=>class extends(e.options.visible?ge:ye){constructor(t){if(super(t),e.options.visible){const r=new Set;function o(e){for(const t of e)"contents"in t?o(t.contents):r.add(t.key)}o(e.properties);let n=!1;return new Proxy(this,{set:(e,t,o,i)=>!n&&"string"==typeof t&&r.has(t)?(n=!0,ge.prototype.setProps.call(e,{[t]:o}),n=!1,!0):Reflect.set(e,t,o,i)})}}},exportWidget(e,t,r){var o,n;for(const i of null!==(n=null===(o=null==r?void 0:r.CoCo)||void 0===o?void 0:o.decorators)&&void 0!==n?n:[])[e,t]=i(e,t);!function(e,t){he.types=e,he.widget=t}(...function(e,t){return[G(e),new Proxy(t,{construct(e,t,r){const[o]=t,n=Reflect.construct(e,t,r);for(const[e,t]of Object.entries(o))Object.defineProperty(n,e,{value:t,writable:!0,enumerable:!0,configurable:!0});return n}})]}(e,t))},Logger:class{constructor(e,t){this.widget=t,this.super=e.options.visible?ge:ye}log(e){this.super.prototype.widgetLog.call(this.widget,e)}info(e){this.super.prototype.widgetLog.call(this.widget,`[信息] ${e}`)}warn(e){this.super.prototype.widgetWarn.call(this.widget,e)}error(e){this.super.prototype.widgetError.call(this.widget,e)}},emit(e,...t){ye.prototype.emit.call(this,e,...t)},utils:{inNative:()=>"file:///android_asset/www/index.html"==location.href,inEditor:()=>/^https?:\/\/coco\.codemao\.cn\/editor\/(editor-player.html)?((#|\?).*)?$/.test(location.href),inEditorWindow:()=>F(window),inEditorPlayer:()=>/^https?:\/\/coco\.codemao\.cn\/editor\/editor-player.html((#|\?).*)?$/.test(location.href),editor:{getWindow:q,getWorkName:U,getRunButton:J,isRunningWork:z,runWork(){var e;z()||null===(e=J())||void 0===e||e.click()},stopWork(){var e;z()&&(null===(e=J())||void 0===e||e.click())},saveWork:()=>new Promise(((e,t)=>{var r;const o=q();if(null==o)return void t(new Error("找不到编辑器窗口"));const n=Array.from(null!==(r=o.document.querySelectorAll(".coco-button.coco-button-circle"))&&void 0!==r?r:[]).find((e=>null!=e.querySelector('[class*="Header_saveText"]')));if(!(n instanceof HTMLElement))return void t(new Error("找不到保存按钮"));n.click();const i=setInterval((()=>{Array.from(n.classList).some((e=>e.startsWith("Header_saving")))||(clearInterval(i),e())}),100)})),reopenWork(){const e=U();if(null==e)throw new Error("找不到作品名称");const t=q();if(null==t)throw new Error("找不到编辑器窗口");const r=Array.from(t.document.querySelectorAll(".coco-menu-item")).find((e=>{var t;return"打开"==(null===(t=e.children[0])||void 0===t?void 0:t.textContent)}));if(!(r instanceof HTMLElement))throw new Error("找不到打开按钮");r.click();const o=setInterval((()=>{var r;const n=t.document.querySelector('[class*="MyProject_main"]');if(!(n instanceof HTMLElement))return;clearInterval(o);const i=Array.from(n.querySelectorAll('[class*="MyProject_name"]')).find((t=>t.textContent==e));if(null==i)throw new Error("找不到作品");null===(r=i.parentElement)||void 0===r||r.click(),setTimeout((()=>{const e=Array.from(t.document.querySelectorAll(".coco-button.coco-button-primary.coco-button-circle")).find((e=>"保存"==e.textContent));e instanceof HTMLElement&&e.click()}),150)}),100)},importWidget:e=>new Promise(((t,r)=>{var o,n,i,l;if("string"==typeof e&&(e=new Blob([e],{type:"text/javascript"})),e instanceof Blob&&(e=new File([e],"widget.js",{type:"text/javascript"})),!(e instanceof File))return void r(new Error("参数错误，widget 必须是 File 或 Blob 或字符串"));const a=Array.from(null!==(i=null===(n=null===(o=q())||void 0===o?void 0:o.document)||void 0===n?void 0:n.querySelectorAll(".coco-upload-button-content"))&&void 0!==i?i:[]).find((e=>"导入自定义控件"==e.textContent));if(!(a instanceof HTMLElement))return void r(new Error("找不到自定义控件导入按钮"));const s=null===(l=a.parentElement)||void 0===l?void 0:l.querySelector("input[type=file]");if(!(s instanceof HTMLInputElement))return void r(new Error("找不到自定义控件导入按钮"));const u=new DataTransfer;u.items.add(e),s.files=u.files,s.dispatchEvent(new Event("change",{bubbles:!0})),setTimeout((()=>{var e;const r=document.querySelector(".coco-button.coco-button-primary.coco-button-dangerous.coco-button-circle");r instanceof HTMLButtonElement&&"覆盖"==(null===(e=r.childNodes[0])||void 0===e?void 0:e.textContent)&&r.click(),t()}),150)}))},getImageURLByFileName(e){var t,r;return null!==(r=null===(t=fe("utils"))||void 0===t?void 0:t.getWidgetImageUrl(e))&&void 0!==r?r:null},getAudioURLByFileName:()=>null,getVideoURLByFileName:()=>null}},ur=__slightning_coco_widget_require__,cr=widgetClass,pr=__slightning_coco_widget_exports__;function Y(e){var t;const r={};return{type:e.type,label:e.info.title,icon:e.info.icon,category:null!==(t=e.info.category)&&void 0!==t?t:void 0,visibleWidget:e.options.visible,global:e.options.global,default:r,props:X(r,e.properties),methods:K(e.methods),emits:Q(e.events)}}function X(e,t){const r=[];return function t(o){var n,i;for(const l of o)if("contents"in l)t(l.contents);else{if(null!=(null===(n=l.blockOptions)||void 0===n?void 0:n.get)&&"object"==typeof l.blockOptions.get&&null!=l.blockOptions.get.key)throw new Error(`无法将属性 ${l.label} 的取值函数转为 Creation Project 类型`);if(null!=(null===(i=l.blockOptions)||void 0===i?void 0:i.set)&&"object"==typeof l.blockOptions.set&&null!=l.blockOptions.set.key)throw new Error(`无法将属性 ${l.label} 的赋值函数转为 Creation Project 类型`);"__width"==l.key&&(l.type instanceof qt||l.type instanceof Ut)?e.width=l.type.defaultValue:"__height"==l.key&&(l.type instanceof qt||l.type instanceof Ut)?e.height=l.type.defaultValue:r.push(Object.assign(Object.assign({key:l.key,label:l.label},l.type.toCreationProjectPropValueTypes()),{noBlock:(()=>{var e,t,r;if(null==(null===(e=l.blockOptions)||void 0===e?void 0:e.get)&&null==(null===(t=l.blockOptions)||void 0===t?void 0:t.set))return!1;if(0==(null===(r=l.blockOptions)||void 0===r?void 0:r.get)&&0==l.blockOptions.set)return!0;throw new Error(`无法将属性 ${l.label} 转为 Creation Project 类型`)})()}))}}(t),r}function K(e){const t=[];let r=null,o=!1;return function e(n,i=[],l={}){var a,s,u,c,p,d,f,y;let g=!0;for(const v of n){if("contents"in v){null==v.label?e(v.contents,i,j({},l,null!==(a=v.blockOptions)&&void 0!==a?a:{})):(o=!0,e(v.contents,[...i,v.label],j({},l,null!==(s=v.blockOptions)&&void 0!==s?s:{})),o=!0),g=!0;continue}if(null!=v.throws&&!(v.throws instanceof ir))throw new Error(`无法将方法 ${v.label} 的抛出类型转为 Creation Project 类型`);const w=j({},l,null!==(u=v.blockOptions)&&void 0!==u?u:{}),b=Object.assign(Object.assign({key:v.key,tipBefore:"",tipAfter:"",params:[]},null===(c=v.returns)||void 0===c?void 0:c.toCreationProjectMethodValueTypes()),{tooltip:null!==(p=v.tooltip)&&void 0!==p?p:void 0,color:w.deprecated?R.GREY:null!==(d=w.color)&&void 0!==d?d:void 0});if("string"==typeof w.deprecated?null==b.tooltip?b.tooltip=`该方法已弃用：${w.deprecated}`:b.tooltip=`${b.tooltip}\n\n该方法已弃用：${w.deprecated}`:w.deprecated&&(null==b.tooltip?b.tooltip="该方法已弃用，并且可能在未来版本中移除，请尽快迁移到其他方法":b.tooltip=`${b.tooltip}\n\n该方法已弃用，并且可能在未来版本中移除，请尽快迁移到其他方法`),null===(f=w.inline)||void 0===f||f){let m=null,T=[];if(null!=w.deprecated&&T.push("[已弃用]"),!v.block.includes(L.THIS))throw new Error(`方法 ${v.label} 缺少 this 参数`);for(let C=0;C<v.block.length;C++){const S=v.block[C];if(S==L.METHOD)T.push(v.label);else{if(S==L.THIS){m=v.block.slice(C+1);break}if("string"==typeof S)T.push(S);else if(null!=S)throw new Error(`方法 ${v.label} 的积木 this 参数前存在他参数，不能将其转为 Creation Project 类型`)}}if(null==m)throw new Error(`方法 ${v.label} 缺少 this 参数`);0!=T.length&&(b.tipBefore=T.join(" "));let V=null;function h(e){null==V?null==b.label?b.label=e:b.label+=" "+e:null==V.labelAfter?V.labelAfter=e:V.labelAfter+=" "+e}for(const _ of m){if(_==L.THIS)throw new Error(`方法只能有一个 this 参数，而方法 ${v.label} 有多个 this 参数`);_==L.METHOD?h(v.label):"string"==typeof _?h(_):(V=Object.assign({key:_.key},_.type.toCreationProjectMethodParamValueTypes()),b.params.push(V))}}else{null!=w.deprecated&&(b.tipBefore="[已弃用]"),b.label=v.label;for(const E of v.block)"object"==typeof E&&b.params.push(Object.assign({key:E.key,label:`\n${E.label}`},E.type.toCreationProjectMethodParamValueTypes()))}g&&(g=!1,null!==(y=b.flyoutOptions)&&void 0!==y||(b.flyoutOptions={}),o&&(o=!1,b.flyoutOptions.line=i.join("·")),null!=r&&(b.flyoutOptions.gap=40)),r=b,t.push(b)}}(e),t}function Q(e){var t,r;const o=[];for(const n of e){if(null!=n.subTypes)throw new Error("无法将事件的子类型转为 Creation Project 类型");o.push({key:n.key,label:null!==(r=null===(t=n.blockOptions)||void 0===t?void 0:t.deprecated)&&void 0!==r&&r?`[已弃用] ${n.label}`:n.label,params:n.params.map((e=>Object.assign({key:e.key,label:e.label},e.type.toCreationProjectEmitParamValueTypes())))})}return o}function Z(e){return/^https:\/\/cp\.cocotais\.cn\/(#|\?.*)?$/.test(e.location.href)}function ee(){if(Z(window))return window;try{if(parent!=window&&Z(parent))return parent}catch(e){}try{if(opener instanceof Window&&Z(opener))return opener}catch(e){}return null}function te(){var e,t,r,o;return null!==(o=null===(r=null===(t=null===(e=re())||void 0===e?void 0:e.parentElement)||void 0===t?void 0:t.querySelector('input[type="text"]'))||void 0===r?void 0:r.value)&&void 0!==o?o:null}function re(){var e,t,r;return null!==(r=Array.from(null!==(t=null===(e=ee())||void 0===e?void 0:e.document.querySelectorAll("button"))&&void 0!==t?t:[]).find((e=>{var t;return/^[\s]*(运[\s]*行|停[\s]*止)[\s]*$/.test(null!==(t=e.textContent)&&void 0!==t?t:"")})))&&void 0!==r?r:null}function oe(){var e,t;return/^[\s]*停[\s]*止[\s]*$/.test(null!==(t=null===(e=re())||void 0===e?void 0:e.textContent)&&void 0!==t?t:"")}const dr={getSuperWidget(e){const t=new Set;return function e(r){for(const o of r)"contents"in o?e(o.contents):t.add(o.key)}(e.properties),class extends cr{constructor(){return super(),new Proxy(this,{defineProperty:(e,r,o)=>"string"==typeof r&&t.has(r)?Reflect.defineProperty(e.props,r,o):Reflect.defineProperty(e,r,o),deleteProperty:(e,r)=>"string"==typeof r&&t.has(r)?Reflect.deleteProperty(e.props,r):Reflect.deleteProperty(e,r),get:(e,r,o)=>"string"==typeof r&&t.has(r)?Reflect.get(e.props,r,o):Reflect.get(e,r,o),getOwnPropertyDescriptor:(e,r)=>"string"==typeof r&&t.has(r)?Reflect.getOwnPropertyDescriptor(e.props,r):Reflect.getOwnPropertyDescriptor(e,r),has:(e,r)=>"string"==typeof r&&t.has(r)?Reflect.has(e.props,r):Reflect.has(e,r),ownKeys:e=>Reflect.ownKeys(e).concat(Reflect.ownKeys(e.props)),set:(r,o,n,i)=>"string"==typeof o&&t.has(o)?e.options.visible?(cr.prototype.setProp.call(i,o,n),!0):Reflect.set(r.props,o,n,i):Reflect.set(r,o,n,i)})}}},exportWidget(e,t,r){var o,n;for(const i of null!==(n=null===(o=null==r?void 0:r.CreationProject)||void 0===o?void 0:o.decorators)&&void 0!==n?n:[])[e,t]=i(e,t);!function(e,t){pr.type=e,pr.widget=t}(...function(e,t){return[Y(e),t]}(e,t))},Logger:class{constructor(e,t){this.widget=t}log(e){cr.prototype.widgetLog.call(this.widget,e)}info(e){cr.prototype.widgetLog.call(this.widget,`[信息] ${e}`)}warn(e){cr.prototype.widgetWarn.call(this.widget,e)}error(e){cr.prototype.widgetError.call(this.widget,e)}},emit(e,...t){cr.prototype.emit.call(this,e,...t)},utils:{inNative(){var e,t;return null!==(t=null===(e=ur("cp_utils"))||void 0===e?void 0:e.native)&&void 0!==t&&t},inEditor(){var e,t;return!(null===(t=null===(e=ur("cp_utils"))||void 0===e?void 0:e.player)||void 0===t||t)},inEditorWindow:function(){return/^https:\/\/cp\.cocotais\.cn\/(pptui)?$/.test(location.href)},inEditorPlayer:function(){return/^https:\/\/cp\.cocotais\.cn\/player(#|\?.*)?$/.test(location.href)},getImageURLByFileName(e){var t,r;return null!==(r=null===(t=ur("cp_utils"))||void 0===t?void 0:t.resToUrl.img(e))&&void 0!==r?r:null},getAudioURLByFileName(e){var t,r;return null!==(r=null===(t=ur("cp_utils"))||void 0===t?void 0:t.resToUrl.audio(e))&&void 0!==r?r:null},getVideoURLByFileName(e){var t,r;return null!==(r=null===(t=ur("cp_utils"))||void 0===t?void 0:t.resToUrl.video(e))&&void 0!==r?r:null},editor:{getWindow:ee,getWorkName:te,getRunButton:re,isRunningWork:oe,runWork(){var e;oe()||null===(e=re())||void 0===e||e.click()},stopWork(){var e;oe()&&(null===(e=re())||void 0===e||e.click())},saveWork:()=>new Promise(((e,t)=>{var r;const o=ee();if(null==o)return void t(new Error("找不到编辑器窗口"));const n=Array.from(null!==(r=o.document.querySelectorAll("button"))&&void 0!==r?r:[]).find((e=>{var t;return/^[\s]*保[\s]*存[\s]*$/.test(null!==(t=e.textContent)&&void 0!==t?t:"")}));if(null==n)return void t(new Error("找不到保存按钮"));n.click();const i=setInterval((()=>{1==n.children.length&&(e(),clearInterval(i))}),100)})),reopenWork(){const e=te();if(null==e)throw new Error("找不到作品名称");const t=ee();if(null==t)throw new Error("找不到编辑器窗口");const r=t.document.querySelector('[data-menu-id="open_cloud"]');if(null==r)throw new Error("找不到打开按钮");r.click();const o=setInterval((()=>{var r;const n=Array.from(null!==(r=t.document.querySelectorAll(".ant-card"))&&void 0!==r?r:[]).find((t=>{var r;return(null===(r=t.querySelector(".ant-card-meta-title"))||void 0===r?void 0:r.textContent)==e}));null!=n&&(n.click(),clearInterval(o))}),100)},importWidget:e=>new Promise(((t,r)=>{if("string"==typeof e&&(e=new Blob([e],{type:"text/javascript"})),e instanceof Blob&&(e=new File([e],"widget.js",{type:"text/javascript"})),!(e instanceof File))return void r(new Error("参数错误，widget 必须是 File 或 Blob 或字符串"));const o=e,n=ee();if(null==n)throw new Error("找不到编辑器窗口");const i=n.document.querySelector('[data-menu-id="import_extension"]');if(null==i)return void r(new Error("找不到自定义控件导入按钮"));const l=n.document.createElement;n.document.createElement=function(e,r){const i=l.call(this,e,r);return i instanceof HTMLInputElement&&(i.addEventListener("click",(e=>{e.preventDefault()})),n.document.createElement=l,setTimeout((()=>{const e=new DataTransfer;e.items.add(o),i.files=e.files,i.dispatchEvent(new Event("change",{bubbles:!0})),setTimeout((()=>{t()}),150)}),0)),i},i.click()}))}}};function ne(e){return s().getSuperWidget(e)}function ie(e,t){return le(e.methods),[e,t]}function le(e){for(const t of e)"contents"in t?le(t.contents):t.block.includes(L.THIS)||t.block.unshift(L.THIS)}function ae(e){var t,r,o,n;for(const i of e)null!=(null===(t=i.blockOptions)||void 0===t?void 0:t.get)&&"object"==typeof(null===(r=i.blockOptions)||void 0===r?void 0:r.get)&&ue(i.blockOptions.get),null!=(null===(o=i.blockOptions)||void 0===o?void 0:o.set)&&"object"==typeof(null===(n=i.blockOptions)||void 0===n?void 0:n.set)&&ue(i.blockOptions.set),"contents"in i&&ae(i.contents)}function se(e){for(const t of e)null!=t.blockOptions&&ue(t.blockOptions),"contents"in t&&se(t.contents)}function ue(e){var t;null!=e.icon&&(e.icon=null!==(t=lr[e.icon])&&void 0!==t?t:e.icon)}class fr{constructor(e,t){this.types=e,this.adapter=new(s().Logger)(e,t)}log(...e){this.outputLog({messages:e,editor:this.adapter.log.bind(this.adapter),browser:e.some((e=>["function","object"].includes(typeof e)))?console.log:null})}info(...e){this.outputLog({messages:e,editor:this.adapter.info.bind(this.adapter),browser:console.info})}warn(...e){this.outputLog({messages:e,editor:this.adapter.warn.bind(this.adapter),browser:console.warn})}error(...e){this.outputLog({messages:e,editor:this.adapter.error.bind(this.adapter),browser:console.error})}outputLog({messages:e,editor:t,browser:r}){if(null!=t)for(const r of function(e){let t=e.split("\n");if(t.length>1){t[0]=`┼　${t[0]}`;for(let e=1;e<t.length;e++)t[e]=`│　${t[e]}`}return t}(e.map((e=>"string"==typeof e?e:I(e))).join(" ")))t(r);null==r||r(`[自定义控件 ${this.types.info.title}]`,...e)}}function ce(e,t){const r={};return function e(t,o={}){var n,i;for(const l of t)"contents"in l?e(l.contents,j({},o,null!==(n=l.blockOptions)&&void 0!==n?n:{})):r[l.key]={types:l,blockOptions:j({},o,null!==(i=l.blockOptions)&&void 0!==i?i:{})}}(e.methods),[e,new Proxy(t,{construct(t,o,n){let i,l;try{i=Reflect.construct(t,o,n),l=new fr(e,i)}catch(t){i=new class extends(ne(e)){constructor(o){super(o),l=new fr(e,this);const n=function(e,t){return"string"==typeof t?`${e}：${t}`:Array.isArray(t)?[e,...t]:[e,t]}("控件构造失败",t);l.error(...O(n));for(const e of Object.keys(r))this[e]=function(){throw n};e.options.visible&&(this.render=function(){throw n})}}(o[0])}return new Proxy(i,{get(t,o,n){const i=Reflect.get(t,o,n);if("string"==typeof o&&o in r){const e=r[o];let n;return n="function"==typeof i?i:o in t?function(){throw new Error(`该方法在控件实体定义中为 ${I(i)}，不是函数`)}:function(){throw new Error(`该方法（key: ${o}）在控件实体定义中不存在`)},new Proxy(n,{apply(t,r,o){let n=null;function i(){var t;if(null==n)if(n=[],null===(t=e.blockOptions.inline)||void 0===t||t){let t=0;for(const r of e.types.block)if(r!=L.THIS)if(r!=L.METHOD)if("string"!=typeof r){if(r.type instanceof Yt){const e=r.type.valueToLabelMap[o[t]];null!=e?n.push(`[${e}]`):n.push(o[t])}else"string"==typeof o[t]?n.push(JSON.stringify(o[t])):n.push(o[t]);t++}else n.push(r);else n.push(e.types.label)}else{n.push(e.types.label);let t=0;for(const r of e.types.block)if(r!=L.THIS)if(r!=L.METHOD){if("string"!=typeof r){if(r.type instanceof Yt){const e=r.type.valueToLabelMap[o[t]];null!=e?n.push(`[${e}]`):n.push(o[t])}else"string"==typeof o[t]?n.push(JSON.stringify(o[t])):n.push(o[t]);t++}}else n.push(e.types.label)}return n}"string"==typeof e.blockOptions.deprecated?l.warn(...i(),"该方法已弃用：",e.blockOptions.deprecated):e.blockOptions.deprecated&&l.warn(...i(),"该方法已弃用，并且可能在未来版本中移除，请尽快迁移到其他方法");const a=[];let s=0;for(const t of e.types.block)if("object"==typeof t){try{W(t.label,o[s],t.type)}catch(e){if(!(e instanceof Gt))throw e;a.push(e)}s++}0!=a.length&&l.error(...i(),"类型验证失败：",...a.map((e=>`\n　${e.message}`)));try{const e=Reflect.apply(t,r,o);return e instanceof Promise?e.catch((e=>{l.error(...i(),"出错：",...O(e))})):e}catch(e){l.error(...i(),"出错：",...O(e))}}})}if(e.options.visible&&"render"==o){let e;return e="function"==typeof i?i:o in t?function(){throw new Error(`渲染方法在控件实体定义中为 ${I(i)}，不是函数`)}:function(){throw new Error("渲染方法在控件实体定义中不存在")},new Proxy(e,{apply(e,t,r){try{return Reflect.apply(e,t,r)}catch(e){return l.error("渲染","出错：",...O(e)),a().createElement("div",{style:{width:"100%",height:"100%",backgroundColor:"#FFFFFF80",overflow:"auto"}},a().createElement("div",{style:{width:"max-content",color:"#C00000",fontSize:"2em",fontWeight:"bold",fontFamily:"monospace"}},"渲染出错：",I(e).split("\n").map((e=>[e,a().createElement("br")]))))}}})}return i}})}})]}const yr={inNative:()=>s().utils.inNative(),inEditor:()=>s().utils.inEditor(),inEditorWindow:()=>s().utils.inEditorWindow(),inEditorPlayer:()=>s().utils.inEditorPlayer(),editor:{getWindow:()=>s().utils.editor.getWindow(),getWorkName:()=>s().utils.editor.getWorkName(),getRunButton:()=>s().utils.editor.getRunButton(),isRunningWork:()=>s().utils.editor.isRunningWork(),runWork:()=>s().utils.editor.runWork(),stopWork:()=>s().utils.editor.stopWork(),saveWork:()=>s().utils.editor.saveWork(),reopenWork:()=>s().utils.editor.reopenWork(),importWidget:e=>s().utils.editor.importWidget(e)},getImageURLByFileName:e=>s().utils.getImageURLByFileName(e),getAudioURLByFileName:e=>s().utils.getAudioURLByFileName(e),getVideoURLByFileName:e=>s().utils.getVideoURLByFileName(e)};if(void 0!==cr&&"function"==typeof ur&&null!=ur("cp_utils"))u(dr);else{if(void 0===ye||void 0===ge)throw new Error(`未知的平台：${location.href}`);u(sr)}const gr={type:"SLIGHTNING_WIDGET_LIVE_RELOAD_WIDGET",info:{title:"控件实时重载",icon:"https://creation.bcmcdn.com/716/appcraft/IMAGE_fLMaBYcwz_1748061454004.svg",category:"开发"},options:{visible:!1,global:!1},properties:[],methods:[{blockOptions:{color:R.CYAN,icon:"https://creation.bcmcdn.com/716/appcraft/IMAGE_2uoB-Hqrvb_1748061454008.svg",inline:!1},contents:[{key:"start",label:"启动",block:[{key:"devServerURL",label:"开发服务器地址",type:new Ft({defaultValue:"ws://localhost:8080/ws"})},{key:"widgetFileURL",label:"控件文件地址",type:new Ft({defaultValue:"http://localhost:8080/widget.js"})},{key:"autoRestartWork",label:"自动重启作品",type:new Yt({entries:[{label:"总是",value:"always"},{label:"从不",value:"never"}]})},{key:"autoReopenWork",label:"自动重新打开作品",type:new Yt({entries:[{label:"当类型定义变化时",value:"whenTypesChanged"},{label:"总是",value:"always"},{label:"从不",value:"never"}]})}]}]}],events:[]};yr.inEditor()&&null==window.SLIGHTNING_WIDGET_LIVE_RELOAD&&(window.SLIGHTNING_WIDGET_LIVE_RELOAD={startedSet:new Set,widgetsCode:{},widgetsTypes:{},start(e,t,r,o){if(window.SLIGHTNING_WIDGET_LIVE_RELOAD.startedSet.has(t))return;window.SLIGHTNING_WIDGET_LIVE_RELOAD.startedSet.add(t);const i=new(l())(e);i.addEventListener("open",(function(){console.log("[自动导入控件] 开发服务连接已打开")})),i.addEventListener("message",(async function(e){if('{"type":"ok"}'==e.data)try{console.log(`[自动导入控件] 正在加载控件 ${t}`);var i=await(await n()(t)).text();if(i==window.SLIGHTNING_WIDGET_LIVE_RELOAD.widgetsCode[t])return void console.log(`[自动导入控件] 控件 ${t} 未发生变化`);if(window.SLIGHTNING_WIDGET_LIVE_RELOAD.widgetsCode[t]=i,await yr.editor.importWidget(i),console.log(`[自动导入控件] 控件 ${t} 导入成功`),"always"==o)return console.log("[自动导入控件] 正在重新打开作品"),await yr.editor.saveWork(),void yr.editor.reopenWork();if("whenTypesChanged"==o){const e={};new Function("require","exports","InvisibleWidget","VisibleWidget","widgetClass","React",i)(fe,e,ye,ge,cr,a());let r=null;"types"in e?r=e.types:"type"in e&&(r=e.type);const o=window.SLIGHTNING_WIDGET_LIVE_RELOAD.widgetsTypes[t],n=JSON.stringify(r,((e,t)=>"function"==typeof t?"(function)":t));if(null!=o&&o!=n)return console.log("[自动导入控件] 类型定义已变化，正在重新打开作品"),await yr.editor.saveWork(),yr.editor.reopenWork(),void(window.SLIGHTNING_WIDGET_LIVE_RELOAD.widgetsTypes[t]=n);window.SLIGHTNING_WIDGET_LIVE_RELOAD.widgetsTypes[t]=n}"always"==r&&yr.editor.isRunningWork()&&(yr.editor.stopWork(),setTimeout((()=>{yr.editor.runWork(),console.log("[自动导入控件] 作品已自动重启")}),0))}catch(e){console.error(`[自动导入控件] 自动导入控件 ${t} 失败`,e)}})),i.addEventListener("error",(function(e){console.error("[自动导入控件] 开发服务连接出错",e)})),i.addEventListener("close",(function(e){window.SLIGHTNING_WIDGET_LIVE_RELOAD.startedSet.delete(t),console.log("[自动导入控件] 开发服务连接已关闭",e)}))}});class hr extends(ne(gr)){constructor(e){super(e)}start(e,t,r,o){const n=yr.editor.getWindow();null!=n?n.SLIGHTNING_WIDGET_LIVE_RELOAD.start(e,t,r,o):console.error("[自动导入控件] 无法获取编辑器窗口")}}!function(e,t,r){var o;const n=s(),i=[...null!==(o=null==r?void 0:r.decorators)&&void 0!==o?o:[]];for(const r of i)[e,t]=r(e,t);n.exportWidget(e,t,r)}(gr,hr,{CoCo:{decorators:[ie,ce]},CreationProject:{decorators:[ie,ce,function(e,t){return function(e){ue(e.info),ae(e.properties),se(e.methods)}(e),[e,t]}]}})}catch(vr){vr instanceof Error&&alert(vr.message),console.error(vr)}}.toString()+")();")(require,exports,require,exports,"undefined"==typeof InvisibleWidget?void 0:InvisibleWidget,"undefined"==typeof VisibleWidget?void 0:VisibleWidget,"undefined"==typeof widgetClass?void 0:widgetClass,React);